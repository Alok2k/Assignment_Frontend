import{r as l,b as e,e as s}from"./index-C1F5EjPv.js";function p(){const[n,c]=l.useState([]),[m,o]=l.useState(!0),r=JSON.parse(localStorage.getItem("user")||"null");l.useEffect(()=>{async function t(){if(!r){c([]),o(!1);return}try{const a=await s.get("http://localhost:4001/cart/"+r.id);c(a.data||[])}catch(a){console.error(a)}finally{o(!1)}}t()},[r]);const d=async t=>{try{const a=await s.delete("http://localhost:4001/cart/"+r.id+"/"+t);c(a.data||[])}catch(a){console.error(a)}},i=async()=>{try{await s.post("http://localhost:4001/cart/"+r.id+"/checkout"),c([]),alert("Order placed")}catch(t){console.error(t)}};return m?e.createElement("div",{className:"loader"}):r?e.createElement("div",{className:"max-w-3xl mx-auto bg-white p-4 rounded shadow"},e.createElement("h2",{className:"text-xl font-bold"},"Cart"),e.createElement("ul",null,n.map(t=>e.createElement("li",{key:t.productId,className:"flex items-center gap-4 py-2 border-b"},e.createElement("img",{src:t.image,className:"w-16 h-16 object-cover"}),e.createElement("div",{className:"flex-1"},t.name),e.createElement("div",null,"Qty: ",t.qty),e.createElement("div",null,"Rs ",t.price),e.createElement("button",{className:"text-red-600",onClick:()=>d(t.productId)},"Remove")))),e.createElement("div",{className:"mt-4"},e.createElement("button",{onClick:i,className:"bg-green-600 text-white px-4 py-2 rounded"},"Place Order"))):e.createElement("div",null,"Please login to view cart")}export{p as default};
