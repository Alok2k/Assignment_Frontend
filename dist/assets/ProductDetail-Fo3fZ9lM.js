import{u,r as n,b as t,e as d}from"./index-C1F5EjPv.js";const p="https://catalog-management-system-dev-ak3ogf6zea-uc.a.run.app/cms/products";function E(){const{id:r}=u(),[a,c]=n.useState(null),[s,l]=n.useState(!0);return n.useEffect(()=>{let o=!1;async function m(){l(!0);try{const e=(await d.get(`${p}/${r}`)).data||{};c({id:e.id||e._id||e.productId,name:e.name||e.title,price:e.price||e.mrp||0,image:e.image||e.imageUrl||e.images&&e.images[0]||"",description:e.description||e.longDescription||""})}catch(i){console.error(i)}finally{o||l(!1)}}return m(),()=>o=!0},[r]),s?t.createElement("div",{className:"loader"}):a?t.createElement("div",{className:"max-w-3xl mx-auto bg-white p-4 rounded shadow"},t.createElement("div",{className:"flex gap-4"},t.createElement("img",{src:a.image,alt:"",className:"w-48 h-48 object-cover"}),t.createElement("div",null,t.createElement("h1",{className:"text-2xl font-bold"},a.name),t.createElement("p",{className:"text-lg text-green-700"},"Rs ",a.price),t.createElement("p",{className:"mt-2"},a.description),t.createElement(g,{item:a})))):t.createElement("div",null,"Product not found")}function g({item:r}){const a=JSON.parse(localStorage.getItem("user")||"null"),c=async()=>{if(!a){alert("Please login");return}try{await d.post("http://localhost:4001/cart/"+a.id,{productId:r.id,name:r.name,price:r.price,qty:1,image:r.image}),alert("Added")}catch{alert("Error adding to cart")}};return t.createElement("button",{onClick:c,className:"mt-4 bg-green-600 text-white px-4 py-2 rounded"},"Add to cart")}export{E as default};
